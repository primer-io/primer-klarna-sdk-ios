<!doctype html><html><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"/><meta http-equiv="Content-Security-Policy" content="object-src 'none'; base-uri 'none'; frame-ancestors 'none';"/><title>Payment View</title><script>/*! For license information please see app.js.LICENSE.txt */
(()=>{var e={56:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],d=n.base?l[0]+n.base:l[0],u=a[d]||0,c="".concat(d," ").concat(u);a[d]=u+1;var p=r(c),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var m=i(h,n);n.byIndex=s,t.splice(s,0,{identifier:c,updater:m,references:1})}o.push(c)}return o}function i(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,i){var a=n(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=r(a[o]);t[s].references--}for(var l=n(e,i),d=0;d<a.length;d++){var u=r(a[d]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var d=0;d<e.length;d++){var u=[].concat(e[d]);n&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},318:function(e,t,r){!function(e){"use strict";var t,r=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),n=r&&"a=1"===new r({a:1}).toString(),i=r&&"+"===new r("s=%2B").get("s"),a=r&&"size"in r.prototype,o="__URLSearchParams__",s=!r||((t=new r).append("s"," &"),"s=+%26"===t.toString()),l=h.prototype,d=!(!e.Symbol||!e.Symbol.iterator);if(!(r&&n&&i&&s&&a)){l.append=function(e,t){v(this[o],e,t)},l.delete=function(e){delete this[o][e]},l.get=function(e){var t=this[o];return this.has(e)?t[e][0]:null},l.getAll=function(e){var t=this[o];return this.has(e)?t[e].slice(0):[]},l.has=function(e){return b(this[o],e)},l.set=function(e,t){this[o][e]=[""+t]},l.toString=function(){var e,t,r,n,i=this[o],a=[];for(t in i)for(r=m(t),e=0,n=i[t];e<n.length;e++)a.push(r+"="+m(n[e]));return a.join("&")};var u,c=e.Proxy&&r&&(!i||!s||!n||!a);c?(u=new Proxy(r,{construct:function(e,t){return new e(new h(t[0]).toString())}})).toString=Function.prototype.toString.bind(h):u=h,Object.defineProperty(e,"URLSearchParams",{value:u});var p=e.URLSearchParams.prototype;p.polyfill=!0,!c&&e.Symbol&&(p[e.Symbol.toStringTag]="URLSearchParams"),"forEach"in p||(p.forEach=function(e,t){var r=g(this.toString());Object.getOwnPropertyNames(r).forEach((function(n){r[n].forEach((function(r){e.call(t,r,n,this)}),this)}),this)}),"sort"in p||(p.sort=function(){var e,t,r,n=g(this.toString()),i=[];for(e in n)i.push(e);for(i.sort(),t=0;t<i.length;t++)this.delete(i[t]);for(t=0;t<i.length;t++){var a=i[t],o=n[a];for(r=0;r<o.length;r++)this.append(a,o[r])}}),"keys"in p||(p.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),y(e)}),"values"in p||(p.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),y(e)}),"entries"in p||(p.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),y(e)}),d&&(p[e.Symbol.iterator]=p[e.Symbol.iterator]||p.entries),"size"in p||Object.defineProperty(p,"size",{get:function(){var e=g(this.toString());if(p===this)throw new TypeError("Illegal invocation at URLSearchParams.invokeGetter");return Object.keys(e).reduce((function(t,r){return t+e[r].length}),0)}})}function h(e){((e=e||"")instanceof URLSearchParams||e instanceof h)&&(e=e.toString()),this[o]=g(e)}function m(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function f(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function y(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return d&&(r[e.Symbol.iterator]=function(){return r}),r}function g(e){var t={};if("object"==typeof e)if(P(e))for(var r=0;r<e.length;r++){var n=e[r];if(!P(n)||2!==n.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");v(t,n[0],n[1])}else for(var i in e)e.hasOwnProperty(i)&&v(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var a=e.split("&"),o=0;o<a.length;o++){var s=a[o],l=s.indexOf("=");-1<l?v(t,f(s.slice(0,l)),f(s.slice(l+1))):s&&v(t,f(s),"")}}return t}function v(e,t,r){var n="string"==typeof r?r:null!=r&&"function"==typeof r.toString?r.toString():JSON.stringify(r);b(e,t)?e[t].push(n):e[t]=[n]}function P(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(void 0!==r.g?r.g:"undefined"!=typeof window?window:this)},523:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(601),i=r.n(n),a=r(314),o=r.n(a)()(i());o.push([e.id,"* {\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    background-color: rgba(255, 255, 255, 0);\n}\n\n#payment-container {\n    text-align: center;\n    vertical-align: top;\n    line-height: 0;\n    font-size: 0;\n}\n",""]);const s=o},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},659:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{"use strict";var e=r(72),t=r.n(e),n=r(825),i=r.n(n),a=r(659),o=r.n(a),s=r(56),l=r.n(s),d=r(540),u=r.n(d),c=r(113),p=r.n(c),h=r(523),m={};m.styleTagTransform=p(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=u(),t()(h.A,m),h.A&&h.A.locals&&h.A.locals,r(318);var f,y=function(){function e(){this._searchParams=new URLSearchParams(location.search)}return e.prototype.getBoolean=function(e,t){var r=this._searchParams.get(e);return null!=r?"true"===r:t},e.prototype.getString=function(e){return this._searchParams.get(e)},e.prototype.getNumber=function(e,t){var r=this._searchParams.get(e)||"",n=parseInt(r);return isNaN(n)?t:n},e}();!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.None=4]="None"}(f||(f={}));var g,v=function(){function e(){this._logLevel=f.None,this._logDelegate=null}return Object.defineProperty(e.prototype,"level",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delegate",{get:function(){return this._logDelegate},set:function(e){this._logDelegate=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel===f.Debug&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(e)),console.log.apply(console,e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<=f.Info&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(e)),console.info.apply(console,e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<=f.Warn&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(e)),console.warn.apply(console,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<=f.Error&&(null!=this._logDelegate&&this._logDelegate.logError(this._stringifyParams(e)),console.error.apply(console,e))},e.prototype._stringifyParams=function(e){try{return JSON.stringify(e,null,2)}catch(e){return"Couldn't stringify logging params."}},e.default=new e,e}(),P=function(){function e(){}return e.randomString=function(e){void 0===e&&(e=10);for(var t="",r=0;r<e;r++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t},e.capitalizeString=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.commaSplitString=function(e){return e.split(/[,]+[\s]*/)},e.createUUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e.keysToCamelCase=function(e){var t=this;return null==e||"object"!=typeof e?e:Array.isArray(e)?e.map((function(e){return t.keysToCamelCase(e)})):Object.keys(e).reduce((function(r,n){return r[t.toCamelCase(n)]=t.keysToCamelCase(e[n]),r}),{})},e.toCamelCase=function(e){return e.replace(/(_\w)/g,(function(e){return e[1].toUpperCase()}))},e.find=function(e,t,r){if(void 0!==Array.prototype.find)return e.find(t,r);if(!(null!==e&&e instanceof Array))throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var n=Object(e),i=n.length>>>0,a=0;a<i;a++){var o=n[a];if(t.call(r,o,a,n))return o}},e}(),b=function(){function e(){}return e.getEndpoint=function(t){return t&&P.find(e.endpoints,(function(e){return e.name===t.toLowerCase()}))||e.getDefaultEndpoint()},e.getDefaultEndpoint=function(){return e.endpoints[0]},e.endpoints=[{name:"aws",assetsHost:"x.klarnacdn.net",analyticsHost:"eu.klarnaevt.com"},{name:"azure",assetsHost:"z.klarnacdn.net",analyticsHost:"naz.klarnaevt.com"}],e}(),E=function(){function e(){}return e.prototype.parseTokenV1=function(e){try{var t=e.split(".");if(t.length<2)return null;var r=t[1].replace("-","+").replace("_","/"),n=atob(r),i=JSON.parse(n);if(this._isKlarnaPaymentsToken(i))return i}catch(e){return null}return null},e.prototype._isKlarnaPaymentsToken=function(e){var t=e;return"string"==typeof t.client_event_base_url&&"string"==typeof t.environment&&"string"==typeof t.language&&"string"==typeof t.merchant_name&&"string"==typeof t.purchase_country&&"string"==typeof t.session_id&&"string"==typeof t.session_type},e}();!function(e){e.PageLoad="PageLoad",e.SdkFound="SdkFound",e.SdkNotFound="SdkNotFound",e.MsgCtrlCreated="MsgCtrlCreated",e.PerformingAddMessageBridge="AddingMessageBridge",e.MessageBridgeAdded="MessageBridgeAdded",e.MessageBridgeLoadError="MessageBridgeLoadError",e.PerformedAddMessageBridge="PerformedAddMessageBridge",e.MsgCtrlInitializing="MsgCtrlInitializing",e.MsgCtrlInitCalledAddPaymentsLib="MsgCtrlInitCalledAddPaymentsLib",e.MsgCtrlInitCalledNativeAddMsgCallback="MsgCtrlInitCalledNativeAddMsgCallback",e.MsgCtrlInitCalledNativeAddReceiver="MsgCtrlInitCalledNativeAddReceiver",e.MsgCtrlInitCalledSendHandshake="MsgCtrlInitCalledSendHandshake",e.MsgCtrlSendResponse="MsgCtrlSendResponse",e.PerformingAddPaymentsLib="AddingPaymentsLib",e.PaymentsLibScriptAlreadyAdded="PaymentsLibScriptAlreadyAdded",e.PaymentsLibAsyncCallbackCalled="PaymentsLibAsyncCallbackCalled",e.PaymentsLibAlreadyLoaded="PaymentsLibAlreadyLoaded",e.PaymentsLibScriptLoaded="PaymentsLibScriptLoaded",e.PaymentsLibScriptLoadError="PaymentsLibScriptLoadError",e.PaymentsLibScriptAdded="PaymentsLibScriptAdded",e.PaymentsLibLoaded="PaymentsLibLoaded",e.RecvdInitialize="RecvdInitialize",e.ValidatedInitialize="ValidatedInitialize",e.PerformingInitialize="PerformingInitialize",e.PerformedInitialize="PerformedInitialize",e.SentInitializeResp="SentInitializeResp",e.InitializeException="InitializeException",e.RecvdLoad="RecvdLoad",e.ValidatedLoad="ValidatedLoad",e.PerformingLoad="PerformingLoad",e.PerformedLoad="PerformedLoad",e.GotLoadCallb="GotLoadCallb",e.SentLoadResp="SentLoadResp",e.LoadException="LoadException",e.RecvdLoadPaymentReview="RecvdLoadPaymentReview",e.ValidatedLoadPaymentReview="ValidatedLoadPaymentReview",e.PerformingLoadPaymentReview="PerformingLoadPaymentReview",e.PerformedLoadPaymentReview="PerformedLoadPaymentReview",e.GotLoadPaymentReviewCallb="GotLoadPaymentReviewCallb",e.SentLoadPaymentReviewResp="SentLoadPaymentReviewResp",e.LoadPaymentReviewException="LoadPaymentReviewException",e.RecvdAuthorize="RecvdAuthorize",e.ValidatedAuthorize="ValidatedAuthorize",e.PerformingAuthorize="PerformingAuthorize",e.PerformedAuthorize="PerformedAuthorize",e.GotAuthorizeCallb="GotAuthorizeCallb",e.SentAuthorizeResp="SentAuthorizeResp",e.AuthorizeException="AuthorizeException",e.RecvdReauthorize="RecvdReauthorize",e.ValidatedReauthorize="ValidatedReauthorize",e.PerformingReauthorize="PerformingReauthorize",e.PerformedReauthorize="PerformedReauthorize",e.GotReauthorizeCallb="GotReauthorizeCallb",e.SentReauthorizeResp="SentReauthorizeResp",e.ReauthorizeException="ReauthorizeException",e.RecvdFinalize="RecvdFinalize",e.ValidatedFinalize="ValidatedFinalize",e.PerformedFinalize="PerformedFinalize",e.GotFinalizeCallb="GotFinalizeCallb",e.SentFinalizeResp="SentFinalizeResp",e.FinalizeException="FinalizeException",e.WrapperError="WrapperError",e.ExpressCheckoutReceivedAuthorize="ExpressCheckoutReceivedAuthorize",e.ExpressCheckoutValidatedInit="ExpressCheckoutValidatedInit",e.ExpressCheckoutValidatedAuthorize="ExpressCheckoutValidatedAuthorize",e.ExpressCheckoutPerformingInit="ExpressCheckoutPerformingInit",e.ExpressCheckoutPerformingAuthorize="ExpressCheckoutPerformingAuthorize",e.ExpressCheckoutPerformedInit="ExpressCheckoutPerformedInit",e.ExpressCheckoutPerformedAuthorize="ExpressCheckoutPerformedAuthorize",e.ExpressCheckoutSentInitResponse="ExpressCheckoutSentInitResponse",e.ExpressCheckoutSentAuthorizeResponse="ExpressCheckoutSentAuthorizeResponse",e.ExpressCheckoutInitException="ExpressCheckoutInitException",e.ExpressCheckoutAuthorizeException="ExpressCheckoutAuthorizeException",e.ExpressCheckoutGotAuthorizeCallback="ExpressCheckoutGotAuthorizeCallback"}(g||(g={}));var A,C,R,S,w,z=function(){function e(){this.additionalParams=null,this.event="undefined",this.sid=P.createUUIDv4(),this.timestamp=Date.now()/1e3,this.wrapper={release:"wrapper-v2",version:"undefined",environment:"undefined"},this.device={os:"undefined",osVersion:"undefined",model:"undefined"},this.sdk={name:"undefined",version:"undefined",buildNumber:"undefined",sid:"undefined"},this.merchant={name:"undefined",packageName:"undefined",version:"undefined",buildNumber:"undefined"},this.kp={token:{environment:"undefined",language:"undefined",merchantName:"undefined",purchaseCountry:"undefined",sessionId:"undefined",sessionType:"undefined"},paymentMethodCategory:"undefined"},this.state={wrapper:{addedPaymentsLibrary:!1,loadedPaymentsLibrary:!1,gotAFatalError:!1},kp:{didInitialize:!1,didLoad:!1,didAuthorize:!1,didReauthorize:!1,didFinalize:!1}},this.additionalParams=null}return e.prototype.updateNativeParamsFromMessage=function(e){this.sdk.name=e.params.nativeName||"undefined",this.sdk.version=e.params.nativeVersion||"undefined",this.sdk.buildNumber=e.params.nativeBuildNumber||"undefined",this.sdk.sid=e.params.sid||"undefined",this.device.model=e.params.deviceName||"undefined",this.device.os=e.params.osName||"undefined",this.device.osVersion=e.params.osVersion||"undefined",this.merchant.name=e.params.merchantAppName||"undefined",this.merchant.packageName=e.params.merchantAppID||"undefined",this.merchant.version=e.params.merchantAppVersion||"undefined",this.merchant.buildNumber=e.params.merchantAppBuildNumber||"undefined"},e.prototype.updateKPParamsFromToken=function(e){this.kp.token.environment=e.environment,this.kp.token.language=e.language,this.kp.token.merchantName=e.merchant_name,this.kp.token.purchaseCountry=e.purchase_country,this.kp.token.sessionId=e.session_id,this.kp.token.sessionType=e.session_type},e.prototype.updatePaymentMethodCategories=function(e){this.kp.paymentMethodCategory=e},e.prototype.updateWithEvent=function(e,t){this.event=e,this.timestamp=Date.now()/1e3,this.additionalParams=t||null,e===g.PaymentsLibScriptAdded?this.state.wrapper.addedPaymentsLibrary=!0:e===g.PaymentsLibLoaded?this.state.wrapper.loadedPaymentsLibrary=!0:e===g.PerformedInitialize?this.state.kp.didInitialize=!0:e===g.GotLoadCallb?this.state.kp.didLoad=!0:e===g.GotAuthorizeCallb?this.state.kp.didAuthorize=!0:e===g.GotReauthorizeCallb?this.state.kp.didReauthorize=!0:e===g.GotFinalizeCallb&&(this.state.kp.didFinalize=!0)},e}(),_=function(){function e(e,t){this._wrapperVersion="v1.2.4-2903f73bdbd",this._analyticsData=new z,this._analyticsData.wrapper.environment=e,this._analyticsData.wrapper.version=this._wrapperVersion,this._endpoint=t}return e.prototype.setSessionTokenString=function(e){var t=(new E).parseTokenV1(e);v.default.debug("Token parsed: ",null!=t),null!=t&&this._analyticsData.updateKPParamsFromToken(t)},e.prototype.setHandshakeMessage=function(e){this._analyticsData.updateNativeParamsFromMessage(e)},e.prototype.setPaymentMethodCategories=function(e){this._analyticsData.updatePaymentMethodCategories(e)},e.prototype.reportEvent=function(e,t){if(this._analyticsData.updateWithEvent(e,t),"SHEIN"===this._analyticsData.merchant.name||"com.zzkko"===this._analyticsData.merchant.packageName||"zzkko.com.ZZKKO"===this._analyticsData.merchant.packageName){var r=JSON.stringify(this._analyticsData);this._sendEvent(e,r)}},e.prototype._sendEvent=function(e,t){v.default.debug("Sending event: "+e);var r="https://".concat(this._endpoint.analyticsHost)+"/v1/in-app/kpwrapper-web-"+(this._wrapperVersion.startsWith("v")?this._wrapperVersion.includes("-")?this._wrapperVersion.split("-")[0]:this._wrapperVersion:"undefined")+"/"+e;setTimeout((function(){window.fetch&&fetch(r,{method:"POST",body:t,mode:"no-cors"})}),0)},e}(),k=function(){function e(e,t){this._analyticsController=e,this._endpoint=t}return e.prototype.loadMessageBridge=function(e){var t=this;v.default.debug("Adding message bridge into page head."),this._analyticsController.reportEvent(g.PerformingAddMessageBridge);var r="MessageBridgeScript";v.default.debug("Creating script element for Message Bridge as #".concat(r,"."));var n=document.createElement("script");n.src="https://".concat(this._endpoint.assetsHost,"/mobile-sdk/mobile-js-snippet/v1/app.min.js"),n.async=!1,n.addEventListener("load",(function(){v.default.debug("Message bridge added."),t._analyticsController.reportEvent(g.MessageBridgeAdded),e(!0)})),n.addEventListener("error",(function(r){v.default.error("Error adding Message bridge.",r),t._analyticsController.reportEvent(g.MessageBridgeLoadError),t.lookForMessageBridge(e)})),n.id=r,document.head.appendChild(n),this._analyticsController.reportEvent(g.PerformedAddMessageBridge)},e.prototype.lookForMessageBridge=function(e){if(null!=window.__KlarnaNativeHook)e(!0);else{var t=this;window.setTimeout((function(){t.lookForMessageBridge(e)}),500)}},e}();!function(e){e.Initialize="initialize",e.Load="load",e.LoadPaymentReview="loadPaymentReview",e.Authorize="authorize",e.Reauthorize="reauthorize",e.Finalize="finalize"}(A||(A={})),function(e){e.Authorize="authorize"}(C||(C={})),function(e){e.InitializeResponse="initializeResponse",e.LoadResponse="loadResponse",e.LoadPaymentReviewResponse="loadPaymentReviewResponse",e.AuthorizeResponse="authorizeResponse",e.ReauthorizeResponse="reauthorizeResponse",e.FinalizeResponse="finalizeResponse"}(R||(R={})),function(e){e.ErrorResponse="errorResponse"}(S||(S={})),function(e){e.InitializeResponse="initializeResponse",e.AuthorizeResponse="authorizeResponse"}(w||(w={}));var L,x,I,M,F,N={Common:S,Payments:{Request:A,Response:R},ExpressCheckout:{Request:C,Response:w}},T=function(){function e(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),this.isPublic=!1,this.isFatal=!1,this.name=e,this.message=t,this.isPublic=r,this.isFatal=n}return e.prototype.toParams=function(){var e={};return e.actionType=N.Common.ErrorResponse,e.error=this.name,e.message=this.message,e.isPublic=1==this.isPublic?"true":"false",e.isFatal=1==this.isFatal?"true":"false",null!=this.fields&&(e.fields=JSON.stringify(this.fields)),null!=this.showForm&&(e.showForm=1==this.showForm?"true":"false"),null!=this.action&&(e.action=this.action),e},e}(),B=function(e,t,r,n){void 0===r&&(r={}),void 0===n&&(n=P.randomString()),this.action=e,this.sender=t,this.receiver="Native",this.params=r,this.messageId=n},O=function(){function e(){}return e.UnexpectedError=new T("UnexpectedError","An unexpected error occurred."),e.UnrecognizedAction=new T("UnrecognizedActionError","Couldn't recognize the action sent to us."),e.NotMockingKp=new T("NotWrappingKpError","Got a KP action despite not wrapping it."),e.LibraryNotAdded=new T("PaymentsLibyNotAddedError","Got message to Payments Library, but it hasn't been added yet."),e.UndefinedActionType=new T("UndefinedActionType","Action type can not be null or undefined."),e.AddingPaymentsLibFailed=new T("AddPaymentsLibError","Error adding Payments Library."),e.PaymentsLibInitFailed=new T("PaymentsLibInitError","Error performing Klarna.Payments.init()."),e.PaymentsLibLoadFailed=new T("PaymentsLibLoadError","Error performing Klarna.Payments.load()."),e.PaymentsLibLoadPaymentReviewFailed=new T("PaymentsLibLoadPaymentReviewError","Error performing Klarna.Payments.loadPaymentReview()."),e.PaymentsLibAuthorizeFailed=new T("PaymentsLibAuthorizeError","Error performing Klarna.Payments.authorize()."),e.PaymentsLibReauthorizeFailed=new T("PaymentsLibReauthorizeError","Error performing Klarna.Payments.reauthorize()."),e.PaymentsLibFinalizeFailed=new T("PaymentsLibFinalizeError","Error performing Klarna.Payments.finalize()."),e.ExpressCheckoutInitializeFailed=new T("ExpressCheckoutInitializeFailed","Failed to initialize Express Checkout.",!0),e.ExpressCheckoutInvalidSessionType=new T("ExpressCheckoutInvalidSessionType","Invalid session type is received for Express Checkout.",!0),e.ExpressCheckoutInitializeInvalidParams=new T("ExpressCheckoutInitializeInvalidParams","Invalid parameters received for Express Checkout.",!0),e.ExpressCheckoutAuthorizeFailed=new T("ExpressCheckoutAuthorizeFailed","Failed to authorize Express Checkout.",!0),e}();!function(e){e.ClientToken="clientToken",e.ReturnUrl="returnUrl",e.PaymentMethodCategory="paymentMethodCategory",e.PaymentMethodCategories="paymentMethodCategories",e.SessionData="sessionData",e.SessionDataString="sessionDataString",e.AutoFinalize="autoFinalize"}(L||(L={})),function(e){e.ShowForm="showForm",e.Approved="approved",e.AuthToken="authToken",e.AuthorizationToken="authorizationToken",e.InvalidFields="invalidFields",e.FinalizeRequired="finalizeRequired"}(x||(x={})),function(e){e.SessionType="sessionType",e.ClientId="clientId",e.ClientToken="clientToken",e.CollectShippingAddress="collectShippingAddress",e.AutoFinalize="autoFinalize",e.SessionData="sessionData",e.SessionDataString="sessionDataString"}(I||(I={})),function(e){e.SessionId="sessionId",e.CollectedShippingAddress="collectedShippingAddress",e.Approved="approved",e.FinalizeRequired="finalizeRequired",e.InvalidFields="invalidFields",e.AuthorizationToken="authorizationToken",e.ClientToken="clientToken",e.ShowForm="showForm",e.MerchantReference1="merchantReference1",e.MerchantReference2="merchantReference2"}(M||(M={})),function(e){e.ActionType="actionType"}(F||(F={}));var j,q={Common:F,Payments:{Request:L,Response:x},ExpressCheckout:{Request:I,Response:M}},D=function(){function e(e,t,r,n,i){this._errors=[],this._receivedMessages=[],this._sentMessages=[],this._componentName="KlarnaPaymentsWrapper",this.analyticsController=e,this.nativeHookController=t,this.paymentsLibraryLoader=r,this.messageHandler=n,this._storeErrorsAndMessages=i,this.analyticsController.reportEvent(g.MsgCtrlCreated,{ComponentName:this._componentName})}return Object.defineProperty(e.prototype,"componentName",{get:function(){return this._componentName},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){var t=this;return v.default.debug("Initializing MessageController."),this.analyticsController.reportEvent(g.MsgCtrlInitializing),this.analyticsController.reportEvent(g.MsgCtrlInitCalledAddPaymentsLib),new Promise((function(r,n){t.paymentsLibraryLoader.load().then((function(i){i?(t._libraryLoaded(e),r()):n()})).catch((function(r){t.sendError(O.AddingPaymentsLibFailed,e),n(r)}))}))},e.prototype._libraryLoaded=function(e){var t=this;e.addMessageCallback((function(e,r){t._receivedMessage(e,r)})),this.analyticsController.reportEvent(g.MsgCtrlInitCalledNativeAddMsgCallback),e.addAsReceiver(this._componentName),this.analyticsController.reportEvent(g.MsgCtrlInitCalledNativeAddReceiver),e.sendHandshake((function(e){null!=t.analyticsController&&null!=e&&t.analyticsController.setHandshakeMessage(e)})),this.analyticsController.reportEvent(g.MsgCtrlInitCalledSendHandshake),this._initializeResizeObserver(e)},e.prototype._initializeResizeObserver=function(e){if(window.ResizeObserver){var t=document.querySelector("#payment-container"),r=new ResizeObserver((function(t){for(var r=0,n=t;r<n.length;r++){var i=n[r];if(v.default.debug("New dimensions found: ",i),i.contentRect){var a=i.contentRect.height;a<5e3&&e.sendResizeEvent(a)}}v.default.debug("Container size changed")}));null!=t&&r.observe(t),v.default.debug("Resize observer initialized")}else v.default.debug("ResizeObserver not supported"),document.addEventListener("resize",(function(){var t=document.querySelector("#payment-container");if(null!=t){var r=t.scrollHeight;r<5e3&&e.sendResizeEvent(r)}}))},e.prototype.sendError=function(e,t){this.analyticsController.reportEvent(g.WrapperError,{error:e.name,message:e.message}),this._storeErrorsAndMessages&&this._errors.push(e),t.sendMessage(new B("actionToNative",this._componentName,e.toParams()),null)},e.prototype.sendResponse=function(e,t){this.analyticsController.reportEvent(g.MsgCtrlSendResponse,{messageId:e});var r=new B("actionToNative",this._componentName,t,e);this._storeErrorsAndMessages&&this._sentMessages.push(r),this.nativeHookController.sendMessage(r,null)},e.prototype._receivedMessage=function(e,t){var r=this;if(this._storeErrorsAndMessages&&this._receivedMessages.push(e),!this.paymentsLibraryLoader.isLoaded())return v.default.error("Received a message to forward to Payments Library, but it's not loaded."),void this.sendError(O.LibraryNotAdded,t);null!=e.params[q.Common.ActionType]?this.messageHandler.handleMessage(e).then((function(t){r.sendResponse(e.messageId,t||{})})).catch((function(e){e instanceof T?r.sendError(e,t):(v.default.error("An unexpected error occurred while handling the message:",e),r.sendError(O.UnexpectedError,t))})):v.default.debug("Action type is missing in message. Message is ignored.")},e}(),K=function(){function e(e,t){this.reqAction=e,this.resAction=t}return e.ResponseForAction=function(t){var r=P.find(e.PredefinedActions,(function(e){return e.reqAction===t}));return null!=r?r.resAction:null},e.HasResponse=function(e){return null!=this.ResponseForAction(e)},e.PredefinedActions=[new e("handshake","handshakeResponse"),new e("putData","putDataResponse"),new e("getData","getDataResponse"),new e("heightChanged",null),new e("httpRequest","httpResponse"),new e("fullScreenReplaceWebView","fullScreenReplaceWebViewResponse"),new e("fullscreenMoveWebView","fullscreenMoveWebViewResponse"),new e("fullscreenReplaceOverlay","fullscreenReplaceOverlayResponse"),new e("fullscreenRestoreWebView","fullscreenRestoreWebViewResponse"),new e("fullscreenLoadUrl",null),new e("fullscreenLoadHtml",null),new e("fullscreenShow","fullscreenShowResponse"),new e("fullscreenHide","fullscreenHideResponse"),new e("focusScroll",null),new e("showInternalBrowser","showInternalBrowserResponse"),new e("hideInternalBrowser","hideInternalBrowserResponse"),new e("openExternalBrowser",null),new e("testExternalApp","testExternalAppResponse"),new e("openExternalApp","openExternalAppResponse"),new e("toggleLogging",null),new e("logMessage",null)],e}(),V=function(){function e(){var e=this;this._receiverName=null,this._receivedMessages=[],this._sentMessages=[],this._allMessages=[],this._callbacks=[],this._storeAllMessages=!1,this._messageHandler=function(t){v.default.debug("Received message: \n"+JSON.stringify(t,null,2)),e._receivedMessages.push(t),e._storeAllMessages&&e._allMessages.push(t),e._notifyCallbacks(t)}}return Object.defineProperty(e.prototype,"storeAllMessages",{get:function(){return this._storeAllMessages},set:function(e){this._storeAllMessages=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"receiverName",{get:function(){return this._receiverName},enumerable:!1,configurable:!0}),e.prototype.addAsReceiver=function(e){null!=this._receiverName&&v.default.warn("Attempting to re-add as receiver ".concat(e,".")),v.default.debug("Adding as receiver: ".concat(e,".")),window.__KlarnaNativeHook.addReceiver(e,this._messageHandler),this._receiverName=e},e.prototype.removeAsReceiver=function(){window.__KlarnaNativeHook.removeReceiver(this._receiverName,this._messageHandler),this._receiverName=null},e.prototype.sendMessage=function(e,t){var r=this;this._storeAllMessages&&(this._sentMessages.push(e),this._allMessages.push(e)),v.default.debug("Sending message: \n"+JSON.stringify(e,null,2)),window.__KlarnaNativeHook.postMessage(e);var n=K.ResponseForAction(e.action);if(null!=t)if(null!=n)var i=window.setInterval((function(){var a=P.find(r._receivedMessages,(function(t){return t.action===n&&t.messageId===e.messageId}));null!=a&&(t(a),window.clearInterval(i))}),100);else t(null)},e.prototype.sendResizeEvent=function(e){if(null!=this._receiverName){var t=new B("heightChanged",this._receiverName);t.params.height=e.toString(),this.sendMessage(t,null)}},e.prototype.sendHandshake=function(e){if(null!=this._receiverName){var t=new B("handshake",this._receiverName);this.sendMessage(t,e)}else e(null)},e.prototype._notifyCallbacks=function(e){var t=this;this._callbacks.forEach((function(r){r(e,t)}))},e.prototype.addMessageCallback=function(e){this._callbacks.push(e)},e.prototype.removeMessageCallback=function(e){this._callbacks=this._callbacks.filter((function(t){return t!==e}))},e}(),J="ShowFormFalseError",H=function(){function e(e,t){void 0===t&&(t=null),this._customAppVersion=null,this._analyticsController=e,this._customAppVersion=t}return e.prototype.performInitialize=function(e){v.default.debug("Performing Klarna.Payments.init()."),this._logAnalyticsEvt(g.PerformingInitialize);try{null!=this._customAppVersion&&(window.Klarna.Payments.__APP_VERSION__=this._customAppVersion),window.Klarna.Payments.init(e),this._logAnalyticsEvt(g.PerformedInitialize);var t={};return t[q.Common.ActionType]=N.Payments.Response.InitializeResponse,this._logAnalyticsEvt(g.SentInitializeResp),Promise.resolve(t)}catch(e){v.default.error("Error performing Klarna.Payments.init().",e),this._logAnalyticsEvt(g.InitializeException,{error:JSON.stringify(e)});var r=O.PaymentsLibInitFailed;return r.action="Initialize",r.name=e.name||r.name,r.isPublic=!0,Promise.reject(r)}},e.prototype.performLoad=function(e,t){var r=this;return v.default.debug("Performing Klarna.Payments.load()."),this._logAnalyticsEvt(g.PerformingLoad),new Promise((function(n,i){try{document.getElementById(e.container.substr(1)).innerHTML="",window.Klarna.Payments.load(e,t,(function(e){if(!e.show_form){var t=new Error("Show form set to false.");return t.name=J,void i(r.logLoadError(t,!0))}r._logAnalyticsEvt(g.GotLoadCallb,{showForm:e.show_form.toString(),error:e.error?JSON.stringify(e.error):""});var a={};a[q.Common.ActionType]=N.Payments.Response.LoadResponse;var o={show_form:e.show_form,error:e.error};r._addPaymentsLibResultToMessage(o,a),r._logAnalyticsEvt(g.SentLoadResp),n(a)})),r._logAnalyticsEvt(g.PerformedLoad)}catch(e){i(r.logLoadError(e))}}))},e.prototype.logLoadError=function(e,t){void 0===t&&(t=!1),v.default.error("Error performing Klarna.Payments.load().",e),this._logAnalyticsEvt(g.LoadException,{error:JSON.stringify(e)});var r=O.PaymentsLibLoadFailed;return r.action="Load",r.name=e.name||r.name,r.isPublic=!0,r.isFatal=t,r},e.prototype.performLoadPaymentReview=function(e){var t=this;return v.default.debug("Performing Klarna.Payments.loadPaymentReview()."),this._logAnalyticsEvt(g.PerformingLoadPaymentReview),new Promise((function(r,n){try{document.getElementById(e.container.substr(1)).innerHTML="",window.Klarna.Payments.loadPaymentReview(e,(function(e){if(!e.show_form){var i=new Error("Show form set to false.");return i.name=J,void n(t.logLoadPaymentReviewError(i,!0))}t._logAnalyticsEvt(g.GotLoadPaymentReviewCallb,{showForm:e.show_form.toString()});var a={};a[q.Common.ActionType]=N.Payments.Response.LoadPaymentReviewResponse;var o={show_form:e.show_form};t._addPaymentsLibResultToMessage(o,a),t._logAnalyticsEvt(g.SentLoadPaymentReviewResp),r(a)})),t._logAnalyticsEvt(g.PerformedLoadPaymentReview)}catch(e){v.default.error("Error performing Klarna.Payments.loadPaymentReview().",e),t._logAnalyticsEvt(g.LoadPaymentReviewException,{error:JSON.stringify(e)});var i=O.PaymentsLibLoadPaymentReviewFailed;i.action="LoadPaymentReview",i.name=e.name||i.name,i.isPublic=!0,n(i)}}))},e.prototype.logLoadPaymentReviewError=function(e,t){void 0===t&&(t=!1),v.default.error("Error performing Klarna.Payments.loadPaymentReview().",e),this._logAnalyticsEvt(g.LoadPaymentReviewException,{error:JSON.stringify(e)});var r=O.PaymentsLibLoadPaymentReviewFailed;return r.action="Load",r.name=e.name||r.name,r.isPublic=!0,r.isFatal=t,r},e.prototype.performAuthorize=function(e,t){var r=this;return v.default.debug("Performing Klarna.Payments.authorize()."),this._logAnalyticsEvt(g.PerformingAuthorize),new Promise((function(n,i){try{window.Klarna.Payments.authorize(e,t,(function(e){if(!e.show_form){var t=new Error("Show form set to false.");return t.name=J,void i(r.logAuthError(t,!0))}r._logAnalyticsEvt(g.GotAuthorizeCallb,{showForm:e.show_form.toString(),approved:e.approved?e.approved.toString():"undefined",error:e.error?JSON.stringify(e.error):"",finalizeRequired:e.finalize_required?e.finalize_required.toString():"undefined"});var a={};a[q.Common.ActionType]=N.Payments.Response.AuthorizeResponse;var o={authorization_token:e.authorization_token,show_form:e.show_form,approved:!0===e.approved,finalize_required:!0===e.finalize_required,error:e.error};r._addPaymentsLibResultToMessage(o,a),r._logAnalyticsEvt(g.SentAuthorizeResp),n(a)})),r._logAnalyticsEvt(g.PerformedAuthorize)}catch(e){i(r.logAuthError(e))}}))},e.prototype.logAuthError=function(e,t){void 0===t&&(t=!1),v.default.error("Error performing Klarna.Payments.authorize().",e),this._logAnalyticsEvt(g.AuthorizeException,{error:JSON.stringify(e)});var r=O.PaymentsLibAuthorizeFailed;return r.action="Authorize",r.name=e.name||r.name,r.isPublic=!0,r.isFatal=t,r},e.prototype.performReauthorize=function(e,t){var r=this;return v.default.debug("Performing Klarna.Payments.reauthorize()."),this._logAnalyticsEvt(g.PerformingReauthorize),new Promise((function(n,i){try{window.Klarna.Payments.reauthorize(e,t,(function(e){if(!e.show_form){var t=new Error("Show form set to false.");return t.name=J,void i(r.logReauthError(t,!0))}r._logAnalyticsEvt(g.GotReauthorizeCallb,{showForm:e.show_form.toString(),approved:e.approved?e.approved.toString():"undefined",error:e.error?JSON.stringify(e.error):""});var a={};a[q.Common.ActionType]=N.Payments.Response.ReauthorizeResponse;var o={authorization_token:e.authorization_token,show_form:e.show_form,approved:!0===e.approved,error:e.error};r._addPaymentsLibResultToMessage(o,a),r._logAnalyticsEvt(g.SentReauthorizeResp),n(a)})),r._logAnalyticsEvt(g.PerformedReauthorize)}catch(e){i(r.logReauthError(e))}}))},e.prototype.logReauthError=function(e,t){void 0===t&&(t=!1),v.default.error("Error performing Klarna.Payments.reauthorize().",e),this._logAnalyticsEvt(g.ReauthorizeException,{error:JSON.stringify(e)});var r=O.PaymentsLibReauthorizeFailed;return r.action="Reauthorize",r.name=e.name||r.name,r.isPublic=!0,r.isFatal=t,r},e.prototype.performFinalize=function(e,t){var r=this;return v.default.debug("Performing Klarna.Payments.finalize()."),this._logAnalyticsEvt(g.PerformedFinalize),new Promise((function(n,i){try{window.Klarna.Payments.finalize(e,t,(function(e){if(r._logAnalyticsEvt(g.GotFinalizeCallb,{showForm:null!=e.show_form?e.show_form.toString():"undefined",approved:null!=e.approved?e.approved.toString():"undefined",error:e.error?JSON.stringify(e.error):""}),!e.show_form){var t=new Error("Show form set to false.");return t.name=J,void i(r.logFinalizeError(t,!0))}var a={};a[q.Common.ActionType]=N.Payments.Response.FinalizeResponse;var o={authorization_token:e.authorization_token,show_form:e.show_form,approved:!0===e.approved,error:e.error};r._addPaymentsLibResultToMessage(o,a),r._logAnalyticsEvt(g.SentFinalizeResp),n(a)})),r._logAnalyticsEvt(g.PerformedFinalize)}catch(e){i(r.logFinalizeError(e))}}))},e.prototype.logFinalizeError=function(e,t){void 0===t&&(t=!1),v.default.error("Error performing Klarna.Payments.finalize().",e),this._logAnalyticsEvt(g.FinalizeException,{error:JSON.stringify(e)});var r=O.PaymentsLibFinalizeFailed;return r.action="Finalize",r.name=e.name||r.name,r.isPublic=!0,r.isFatal=t,r},e.prototype._addPaymentsLibResultToMessage=function(e,t){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))if("show_form"===r){var n=e[r];null!=n&&(t[q.Payments.Response.ShowForm]=n.toString())}else if("error"===r)for(var i in e[r])"invalid_fields"===i?t[q.Payments.Response.InvalidFields]=JSON.stringify(e[r][i],null,2):v.default.warn("Got unrecognized field in error from Payments Library: ".concat(i,". Will not forward it to the SDK."));else if("authorization_token"===r){var a=e[r];null!=a&&(t[q.Payments.Response.AuthToken]=a.toString(),t[q.Payments.Response.AuthorizationToken]=a.toString())}else if("approved"===r){var o=e[r];null!=o&&(t[q.Payments.Response.Approved]=o.toString())}else if("finalize_required"===r){var s=e[r];null!=s&&(t[q.Payments.Response.FinalizeRequired]=s.toString())}else v.default.warn("Got unrecognized field from Payments Library: ".concat(r,". Will not forward it to the SDK."))},e.prototype._logAnalyticsEvt=function(e,t){null!=this._analyticsController&&this._analyticsController.reportEvent(e,t)},e}(),U=function(){function e(e,t){this.customAppVersion=e,this.analyticsController=t}return e.prototype.performInitialize=function(e){this.analyticsController.reportEvent(g.ExpressCheckoutPerformingInit);try{if(null!=this.customAppVersion&&(window.Klarna.Payments.__APP_VERSION__=this.customAppVersion),null!=e.client_id==(null!=e.client_token))return Promise.reject(O.ExpressCheckoutInitializeInvalidParams);v.default.debug("Performing Klarna.Payments.Buttons.init()."),window.Klarna.Payments.Buttons.init(e),this.analyticsController.reportEvent(g.ExpressCheckoutPerformedInit),v.default.debug("Performed Klarna.Payments.Buttons.init() successfully.");var t={};return t[q.Common.ActionType]=N.ExpressCheckout.Response.InitializeResponse,this.analyticsController.reportEvent(g.ExpressCheckoutSentInitResponse),Promise.resolve(t)}catch(e){return Promise.reject(this.handleInitializeException(e))}},e.prototype.handleInitializeException=function(e){v.default.error("Error performing Klarna.Payments.Buttons.init().",e),this.analyticsController.reportEvent(g.ExpressCheckoutInitException,{error:JSON.stringify(e)});var t=O.ExpressCheckoutInitializeFailed;return t.action="Initialize",t.isPublic=!0,t},e.prototype.performAuthorize=function(e,t){var r=this;return v.default.debug("Performing Klarna.Payments.Buttons.authorize()."),this.analyticsController.reportEvent(g.ExpressCheckoutPerformingAuthorize),new Promise((function(n,i){try{window.Klarna.Payments.Buttons.authorize(e,t,(function(e){if(e.show_form){r.analyticsController.reportEvent(g.ExpressCheckoutGotAuthorizeCallback,{showForm:e.show_form.toString(),approved:e.approved.toString(),error:e.error?JSON.stringify(e.error):"",finalizeRequired:e.finalize_required?e.finalize_required.toString():"undefined"});var t=r.createAuthorizeResponse(e);r.analyticsController.reportEvent(g.ExpressCheckoutSentAuthorizeResponse),v.default.debug("Performed Klarna.Payments.Buttons.authorize() successfully."),n(t)}else{var a=new Error("Show form set to false.");a.name=J;var o=r.handleAuthorizeError(a,!0);i(o)}})),r.analyticsController.reportEvent(g.ExpressCheckoutPerformedAuthorize)}catch(e){i(r.handleAuthorizeError(e))}}))},e.prototype.handleAuthorizeError=function(e,t){void 0===t&&(t=!1),v.default.error("Error performing Klarna.Payments.Buttons.authorize().",e),this.analyticsController.reportEvent(g.ExpressCheckoutAuthorizeException,{error:JSON.stringify(e)});var r=O.ExpressCheckoutAuthorizeFailed;return r.action="Authorize",r.isPublic=!0,r.isFatal=t,r},e.prototype.createAuthorizeResponse=function(e){var t,r=((t={})[q.Common.ActionType]=N.ExpressCheckout.Response.AuthorizeResponse,t[q.ExpressCheckout.Response.ShowForm]=e.show_form.toString(),t[q.ExpressCheckout.Response.Approved]=e.approved.toString(),t[q.ExpressCheckout.Response.FinalizeRequired]=e.finalize_required.toString(),t[q.ExpressCheckout.Response.SessionId]=e.session_id,t);return e.authorization_token&&(r[q.ExpressCheckout.Response.AuthorizationToken]=e.authorization_token),e.client_token&&(r[q.ExpressCheckout.Response.ClientToken]=e.client_token),e.collected_shipping_address&&(r[q.ExpressCheckout.Response.CollectedShippingAddress]=JSON.stringify(P.keysToCamelCase(e.collected_shipping_address))),e.merchant_reference_1&&(r[q.ExpressCheckout.Response.MerchantReference1]=e.merchant_reference_1),e.merchant_reference_2&&(r[q.ExpressCheckout.Response.MerchantReference2]=e.merchant_reference_2),r},e}(),G=function(){function e(){}return e.prototype.parseUtf8Base64=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e}();!function(e){e[e.AsString=0]="AsString",e[e.AsStringArray=1]="AsStringArray",e[e.AsBoolean=2]="AsBoolean",e[e.AsBase64EncodedString=3]="AsBase64EncodedString",e[e.AsBase64EncodedJsonObject=4]="AsBase64EncodedJsonObject",e[e.AsStringifiedJsonObject=5]="AsStringifiedJsonObject"}(j||(j={}));var W,Z=function(){function e(){}return e.validateParameter=function(e,t,r,n,i,a){var o=this.validateParameterInternal(e,t,r,n,i);return o?(o.isPublic=a,o):null},e.validateParameterInternal=function(e,t,r,n,i){var a=this.validateDefinedParameter(e,t);if(a)return n?null:a;var o=this.validateNonNullParameter(e,t);if(o)return n?null:o;var s=e.params[t];if(r===j.AsString){var l=this.validateStringParameter(s,t,i);if(l)return l}else if(r===j.AsStringArray){var d=P.commaSplitString(s),u=this.validateStringArrayParameter(d,t,i);if(u)return u}else if(r==j.AsBoolean){var c=this.validateBooleanParameter(s,t);if(c)return c}else if(r==j.AsStringifiedJsonObject){var p=this.validateStringifiedJsonObjectParameter(s,t);if(p)return p}else if(r==j.AsBase64EncodedJsonObject){var h=this.validateBase64EncodedJsonObjectParameter(s,t);if(h)return h}return null},e.validateDefinedParameter=function(e,t){if(void 0===e.params[t])return new T(P.capitalizeString(t)+"UndefinedError","Param "+t+" is undefined.")},e.validateNonNullParameter=function(e,t){if(null===e.params[t])return new T(P.capitalizeString(t)+"NullError","Param "+t+" is null.")},e.validateStringParameter=function(e,t,r){if(!r&&0==e.trim().length)return new T("MissingParamError","Param can't be an empty or blank string for "+t+".")},e.validateStringArrayParameter=function(e,t,r){if(!r){if(0==e.length)return new T("MissingParamsError","At least one param needs to be provided for "+t+".");for(var n=0,i=e;n<i.length;n++)if(0==i[n].trim().length)return new T("EmptyParamError","At least one of the params is an empty or blank string for "+t+".")}},e.validateBooleanParameter=function(e,t){if("true"!==e.toLowerCase()&&"false"!==e.toLowerCase())return new T("InvalidBoolValueError","Param "+t+" should be encoded as either a string with `true` or `false`.")},e.validateStringifiedJsonObjectParameter=function(e,t){try{if(0==e.trim().length)return new T("InvalidJsonObjectError","Param can't be an empty or blank string for "+t+".");var r=JSON.parse(e);return"object"!=typeof r||null===r?new T("InvalidJsonObjectError","Param "+t+" should be a valid JSON object."):void 0}catch(e){return new T("InvalidJsonObjectError","Param "+t+" should be a valid JSON object.")}},e.validateBase64EncodedJsonObjectParameter=function(e,t){try{if(0==e.trim().length)return new T("InvalidBase64JsonObjectError","Param can't be an empty or blank string for "+t+".");var r=(new G).parseUtf8Base64(e);return this.validateStringifiedJsonObjectParameter(r,t)?new T("InvalidBase64JsonObjectError","Param "+t+" should be a valid Base64 encoded JSON object."):void 0}catch(e){return new T("InvalidBase64JsonObjectError","Param "+t+" should be a valid Base64 encoded string.")}},e}();!function(e){e.ClientSideSession="clientSideSession",e.ServerSideSession="serverSideSession"}(W||(W={}));var Q=function(){function e(){}return e.parseStringParamAsJson=function(e,t){var r=e.params[t];if(null==r||"null"===r)return null;try{return JSON.parse(r)}catch(e){return v.default.error("Error parsing string from message for field ".concat(t,".")),null}},e.parseBase64StringAsJson=function(e,t){var r=e.params[t];if(null==r||"null"===r)return null;try{var n=(new G).parseUtf8Base64(r);return JSON.parse(n)}catch(e){return v.default.error("Error parsing base64 string from message for field ".concat(t,".")),null}},e}(),X=function(){function e(e,t){this.analyticsController=e,this.expressCheckoutController=t}return e.prototype.handleMessage=function(e){return null==e.params[q.Common.ActionType]?(v.default.debug("Action type is missing in message. Message is ignored."),Promise.reject(O.UndefinedActionType)):e.params[q.Common.ActionType]===N.ExpressCheckout.Request.Authorize?(this.analyticsController.reportEvent(g.ExpressCheckoutReceivedAuthorize),this.initializeThenAuthorize(e)):Promise.reject(O.UnrecognizedAction)},e.prototype.initializeThenAuthorize=function(e){var t=this;return this.getSessionType(e).then((function(r){return t.handleInitialize(e,r).then((function(){return t.handleAuthorize(e,r)}))})).catch((function(e){return Promise.reject(t.addActionToErrors(e))}))},e.prototype.addActionToErrors=function(e){return e instanceof T&&(e.action=N.ExpressCheckout.Request.Authorize),e},e.prototype.getSessionType=function(e){var t=Z.validateParameter(e,q.ExpressCheckout.Request.SessionType,j.AsString,!1,!1,!0);if(null!=t)return Promise.reject(t);var r=e.params[q.ExpressCheckout.Request.SessionType];return r===W.ClientSideSession||r===W.ServerSideSession?Promise.resolve(r):Promise.reject(O.ExpressCheckoutInvalidSessionType)},e.prototype.handleInitialize=function(e,t){var r=this;return v.default.debug("Handling Express Checkout initialize..."),this.getExpressCheckoutButtonInitParams(e,t).then((function(e){return r.analyticsController.reportEvent(g.ExpressCheckoutValidatedInit),r.expressCheckoutController.performInitialize(e)}))},e.prototype.handleAuthorize=function(e,t){v.default.debug("Handling Express Checkout authorize...");var r=this.validateAuthorizeParams(e);if(null!=r)return Promise.reject(r);this.analyticsController.reportEvent(g.ExpressCheckoutValidatedAuthorize);var n=e.params[q.ExpressCheckout.Request.CollectShippingAddress],i=e.params[q.ExpressCheckout.Request.AutoFinalize],a={collectShippingAddress:"true"===n,autoFinalize:null==i||"true"===i},o=Q.parseStringParamAsJson(e,q.ExpressCheckout.Request.SessionDataString);return null!=o&&0!==o.length||(o=Q.parseBase64StringAsJson(e,q.ExpressCheckout.Request.SessionData)),t!==W.ClientSideSession||null!=o&&0!==o.length?this.expressCheckoutController.performAuthorize(a,o):Promise.reject(new T("InvalidParamError","Session data must be a valid JSON object string.",!0))},e.prototype.getExpressCheckoutButtonInitParams=function(e,t){if(t==W.ClientSideSession){var r=Z.validateParameter(e,q.ExpressCheckout.Request.ClientId,j.AsString,!1,!1,!0);return null!=r?Promise.reject(r):Promise.resolve({client_id:e.params[q.ExpressCheckout.Request.ClientId]})}if(t==W.ServerSideSession){var n=Z.validateParameter(e,q.ExpressCheckout.Request.ClientToken,j.AsString,!1,!1,!0);return null!=n?Promise.reject(n):Promise.resolve({client_token:e.params[q.ExpressCheckout.Request.ClientToken]})}return Promise.reject(O.ExpressCheckoutInvalidSessionType)},e.prototype.validateAuthorizeParams=function(e){var t=Z.validateParameter(e,q.ExpressCheckout.Request.CollectShippingAddress,j.AsBoolean,!0,!1,!0);return null!=t||null!=(t=Z.validateParameter(e,q.ExpressCheckout.Request.AutoFinalize,j.AsBoolean,!0,!1,!0))||null!=(t=Z.validateParameter(e,q.ExpressCheckout.Request.SessionDataString,j.AsStringifiedJsonObject,!0,!1,!0))||null!=(t=Z.validateParameter(e,q.ExpressCheckout.Request.SessionData,j.AsBase64EncodedJsonObject,!0,!1,!0))?t:null},e}(),Y=function(){function e(e,t,r){this.analyticsController=e,this.paymentsLibraryController=t,this._mockKpMethods=r}return e.prototype.handleMessage=function(e){var t=[N.Payments.Request.Initialize,N.Payments.Request.Load,N.Payments.Request.LoadPaymentReview,N.Payments.Request.Authorize,N.Payments.Request.Reauthorize,N.Payments.Request.Finalize],r=null!=P.find(t,(function(t){return t===e.params[q.Common.ActionType]}));if(!r)return Promise.reject(O.UnrecognizedAction);if(r&&!this._mockKpMethods)return v.default.error("Received a message wrapper should mock, but wrapper is not mocking KP."),Promise.reject(O.NotMockingKp);if(r&&this._mockKpMethods){var n=e.params[q.Common.ActionType];return n===N.Payments.Request.Initialize?(this.analyticsController.reportEvent(g.RecvdInitialize),this._handleBridgeInitialize(e)):n===N.Payments.Request.Load?(this.analyticsController.reportEvent(g.RecvdLoad),this._handleBridgeLoad(e)):n===N.Payments.Request.LoadPaymentReview?(this.analyticsController.reportEvent(g.RecvdLoadPaymentReview),this._handleBridgeLoadPaymentReview()):n===N.Payments.Request.Authorize?(this.analyticsController.reportEvent(g.RecvdAuthorize),this._handleBridgeAuthorize(e)):n===N.Payments.Request.Reauthorize?(this.analyticsController.reportEvent(g.RecvdReauthorize),this._handleBridgeReauthorize(e)):n===N.Payments.Request.Finalize?(this.analyticsController.reportEvent(g.RecvdFinalize),this._handleBridgeFinalize(e)):Promise.reject(O.UnrecognizedAction)}return Promise.reject()},e.prototype._handleBridgeInitialize=function(e){v.default.debug("Handling mock init.");var t=Z.validateParameter(e,q.Payments.Request.ClientToken,j.AsString,!1,!1,!1);if(null!=t)return Promise.reject(t);this.analyticsController.setSessionTokenString(e.params[q.Payments.Request.ClientToken]);var r=Z.validateParameter(e,q.Payments.Request.ReturnUrl,j.AsString,!1,!1,!1);if(null!=r)return Promise.reject(r);this.analyticsController.reportEvent(g.ValidatedInitialize);var n={client_token:e.params[q.Payments.Request.ClientToken]};return this.paymentsLibraryController.performInitialize(n)},e.prototype._handleBridgeLoad=function(e){v.default.debug("Handling mock load.");var t=Z.validateParameter(e,q.Payments.Request.PaymentMethodCategories,j.AsStringArray,!1,!1,!1);if(null!=t)return Promise.reject(t);var r=Z.validateParameter(e,q.Payments.Request.SessionData,j.AsBase64EncodedString,!0,!1,!1);if(null!=r)return Promise.reject(r);var n=Z.validateParameter(e,q.Payments.Request.SessionDataString,j.AsString,!0,!1,!1);if(null!=n)return Promise.reject(n);this.analyticsController.reportEvent(g.ValidatedLoad);var i=P.commaSplitString(e.params[q.Payments.Request.PaymentMethodCategories]);this.analyticsController.setPaymentMethodCategories(e.params[q.Payments.Request.PaymentMethodCategories]);var a={container:"#payment-container",instance_id:"some-hardcoded-instance-id",payment_method_categories:i},o=Q.parseStringParamAsJson(e,q.Payments.Request.SessionDataString);return null===o&&(o=Q.parseBase64StringAsJson(e,q.Payments.Request.SessionData)),this.paymentsLibraryController.performLoad(a,o)},e.prototype._handleBridgeLoadPaymentReview=function(){return v.default.debug("Handling mock load payment review."),this.analyticsController.reportEvent(g.ValidatedLoadPaymentReview),this.paymentsLibraryController.performLoadPaymentReview({container:"#payment-container"})},e.prototype._handleBridgeAuthorize=function(e){v.default.debug("Handling mock auth.");var t=Z.validateParameter(e,q.Payments.Request.AutoFinalize,j.AsBoolean,!0,!1,!1);if(null!=t)return Promise.reject(t);var r=Z.validateParameter(e,q.Payments.Request.PaymentMethodCategories,j.AsStringArray,!1,!1,!1);if(null!=r)return Promise.reject(r);var n=Z.validateParameter(e,q.Payments.Request.SessionData,j.AsBase64EncodedString,!0,!1,!1);if(null!=n)return Promise.reject(n);var i=Z.validateParameter(e,q.Payments.Request.SessionDataString,j.AsString,!0,!1,!1);if(null!=i)return Promise.reject(i);this.analyticsController.reportEvent(g.ValidatedAuthorize);var a={instance_id:"some-hardcoded-instance-id"};null!=e.params[q.Payments.Request.AutoFinalize]?a.auto_finalize="true"===e.params[q.Payments.Request.AutoFinalize]:v.default.debug("autoFinalize is null.");var o=Q.parseStringParamAsJson(e,q.Payments.Request.SessionDataString);return null===o&&(o=Q.parseBase64StringAsJson(e,q.Payments.Request.SessionData)),this.paymentsLibraryController.performAuthorize(a,o)},e.prototype._handleBridgeReauthorize=function(e){v.default.debug("Handling mock reauth.");var t=Z.validateParameter(e,q.Payments.Request.PaymentMethodCategories,j.AsStringArray,!1,!1,!1);if(null!=t)return Promise.reject(t);var r=Z.validateParameter(e,q.Payments.Request.SessionData,j.AsBase64EncodedString,!0,!1,!1);if(null!=r)return Promise.reject(r);var n=Z.validateParameter(e,q.Payments.Request.SessionDataString,j.AsString,!0,!1,!1);if(null!=n)return Promise.reject(n);this.analyticsController.reportEvent(g.ValidatedReauthorize);var i={instance_id:"some-hardcoded-instance-id",payment_method_categories:P.commaSplitString(e.params[q.Payments.Request.PaymentMethodCategories])},a=Q.parseStringParamAsJson(e,q.Payments.Request.SessionDataString);return null===a&&(a=Q.parseBase64StringAsJson(e,q.Payments.Request.SessionData)),this.paymentsLibraryController.performReauthorize(i,a)},e.prototype._handleBridgeFinalize=function(e){v.default.debug("Handling mock finalize.");var t=Z.validateParameter(e,q.Payments.Request.PaymentMethodCategories,j.AsStringArray,!1,!1,!1);if(null!=t)return Promise.reject(t);var r=Z.validateParameter(e,q.Payments.Request.SessionData,j.AsBase64EncodedString,!0,!1,!1);if(null!=r)return Promise.reject(r);var n=Z.validateParameter(e,q.Payments.Request.SessionDataString,j.AsString,!0,!1,!1);if(null!=n)return Promise.reject(n);this.analyticsController.reportEvent(g.ValidatedFinalize);var i={instance_id:"some-hardcoded-instance-id",payment_method_categories:P.commaSplitString(e.params[q.Payments.Request.PaymentMethodCategories])},a=Q.parseStringParamAsJson(e,q.Payments.Request.SessionDataString);return null===a&&(a=Q.parseBase64StringAsJson(e,q.Payments.Request.SessionData)),this.paymentsLibraryController.performFinalize(i,a)},e}(),$=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},ee=function(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},te=function(){function e(e,t,r,n){this.customLibraryUrl=null,this.customLibraryVersion=null,this.paymentsLibraryScriptId="PaymentsLibraryScript",this._asyncCallbackTriggered=!1,this.loadPromise=null,this.loadPromiseFulfilled=!1,this.customLibraryUrl=e,this.customLibraryVersion=t,this.endpoint=r,this.analyticsController=n,window.klarnaAsyncCallback=this.asyncCallbackTriggered.bind(this)}return e.prototype.isLoaded=function(){return this.isScriptAdded()&&this.isAsyncCallbackTriggered()},e.prototype.load=function(){return $(this,void 0,void 0,(function(){var e,t,r=this;return ee(this,(function(n){return v.default.debug("Adding Klarna Payments Library into page head."),this.analyticsController.reportEvent(g.PerformingAddPaymentsLib),this.isLoaded()?(v.default.warn("Payments Library already added to page. Won't add it again."),this.analyticsController.reportEvent(g.PaymentsLibAlreadyLoaded),[2,!1]):null!=this.loadPromise&&this.loadPromiseFulfilled?[2,this.loadPromise.catch((function(){return r.loadPromise=null,r.loadPromiseFulfilled=!1,r.load()}))]:(v.default.debug("Creating script element for Payments Library as #".concat(this.paymentsLibraryScriptId,".")),e=this.customLibraryUrl||"https://".concat(this.endpoint.assetsHost,"/kp/lib/").concat(this.customLibraryVersion||"v1","/api.js?cb=").concat(Date.now()),v.default.debug("Loading Payments library from ".concat(e)),t=new Promise((function(t,n){r.addLibraryScript(e).then((function(e){e?r._asyncCallbackTriggered?(r.analyticsController.reportEvent(g.PaymentsLibLoaded),r.loadPromiseFulfilled=!0,t(!0)):(v.default.warn("Async callback not triggered yet. Waiting for it."),r.asyncCallbackBlock=function(){r.analyticsController.reportEvent(g.PaymentsLibLoaded),r.loadPromiseFulfilled=!0,t(!0)}):(v.default.error("Could not add Payments Library script."),r.loadPromiseFulfilled=!0,n(!1))})).catch((function(e){v.default.error("Error adding Payments Library script.",e),r.loadPromiseFulfilled=!0,n(!1)}))})),this.loadPromise=t,[2,t])}))}))},e.prototype.addLibraryScript=function(e){return $(this,void 0,void 0,(function(){var t=this;return ee(this,(function(r){return[2,new Promise((function(r,n){if(t.isScriptAdded())return v.default.warn("Payments Library script already exists in the document head."),t.analyticsController.reportEvent(g.PaymentsLibScriptAlreadyAdded),void r(!0);var i=document.createElement("script");i.src=e,i.async=!1,i.addEventListener("load",(function(){v.default.debug("Payments Library added."),t.analyticsController.reportEvent(g.PaymentsLibScriptLoaded),r(!0)})),i.addEventListener("error",(function(e){v.default.error("Error adding Payments Lib.",e),t.analyticsController.reportEvent(g.PaymentsLibScriptLoadError),n(!1)})),i.id=t.paymentsLibraryScriptId,t.analyticsController.reportEvent(g.PaymentsLibScriptAdded),document.head.appendChild(i)}))]}))}))},e.prototype.isScriptAdded=function(){var e=document.getElementById(this.paymentsLibraryScriptId);return null!=e&&e instanceof HTMLScriptElement},e.prototype.isAsyncCallbackTriggered=function(){return this._asyncCallbackTriggered},e.prototype.asyncCallbackTriggered=function(){this._asyncCallbackTriggered=!0,v.default.warn("Async callback triggered."),this.analyticsController.reportEvent(g.PaymentsLibAsyncCallbackCalled),null!=this.asyncCallbackBlock&&(this.asyncCallbackBlock(),this.asyncCallbackBlock=void 0)},e}(),re=function(){function e(e,t,r){this.analyticsController=e,this.messageBridgeController=t,this.endpoint=r}return e.prototype.initialize=function(){var e=this;this.messageBridgeController.loadMessageBridge((function(t){t&&e.initializeSDK(e.parseAppParams())}))},e.prototype.parseAppParams=function(){var e=new y,t=e.getBoolean("mockkp",!1),r=e.getBoolean("storeall",!1),n=e.getString("liburl"),i=e.getString("libversion"),a=e.getString("appversion");return{integration:e.getString("integration"),paymentsLibUrl:n,paymentsLibVersion:i,paymentsAppVersion:a,storeMessagesAndErrors:r,mockKpActions:t}},e.prototype.initializeSDK=function(e){null!=window.__KlarnaNativeHook&&window.__KlarnaNativeHook.inSdkWebView()?(v.default.debug("Running in SDK."),this.analyticsController.reportEvent(g.SdkFound),this.initializeControllers(e)):(v.default.debug("Not running in SDK."),this.analyticsController.reportEvent(g.SdkNotFound))},e.prototype.initializeControllers=function(e){var t=new V;t.storeAllMessages=e.storeMessagesAndErrors,e.storeMessagesAndErrors&&(window.__NativeHookController=t);var r=new te(e.paymentsLibUrl,e.paymentsLibVersion,this.endpoint,this.analyticsController),n=this.initializeIntegration(e),i=new D(this.analyticsController,t,r,n,e.storeMessagesAndErrors);window.__WrapperMessageController=i,i.initialize(t).catch((function(e){v.default.error("Failed to initialize MessageController:",e)}))},e.prototype.initializeIntegration=function(e){if("kec"===e.integration){var t=new U(e.paymentsAppVersion,this.analyticsController);return new X(this.analyticsController,t)}var r=new H(this.analyticsController,e.paymentsAppVersion);return new Y(this.analyticsController,r,e.mockKpActions)},e}();window.addEventListener("load",(function(){var e=new y;v.default.level=e.getNumber("loglevel",f.None),v.default.debug("Page loaded. Initializing HTML wrapper.");var t="debug"===e.getString("environment")?"staging":"production",r=b.getEndpoint(e.getString("endpoint")),n=new _(t,r);n.reportEvent(g.PageLoad);var i=new k(n,r);new re(n,i,r).initialize()}))})()})();</script></head><body><div id="payment-container"></div></body></html>